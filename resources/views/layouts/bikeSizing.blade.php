<div class="cube-calc-component">
    <div class="cube-calc-container">
        
        <div class="cube-calc-grid">
            <div class="col-visual">
                <h2 class="section-title">Trouvez votre taille
                <span class="info-bubble" data-tooltip="Notre algorithme analyse votre taille et votre entrejambe pour vous recommander le cadre le plus ergonomique pour votre morphologie.">?</span>
                </h2>
                
                <div class="silhouette-wrapper">
                    <svg class="silhouette-svg" viewBox="0 0 201.8363365827 501.0700073242">
                        <defs><style> .cls-1 { fill: #d4d4d4; } </style></defs>
                        <path d="M198.7513298688,0h3.0850067139v501.0700073242h-3.0850067139V0Z" class="cls-1"></path>
                        <path d="M167.4613365827,10.5199279785h30v7.700012207h-29.6999969482l-3.3000030518,2v-11.200012207l3,1.5Z" class="cls-1" style="fill: rgb(212, 212, 212);"></path>
                        <g>
                            <path d="M132.0834679303,177.7971801758v-.0000610352c-.0915527344-4.6059570312.6361083984-10.0299682617.3642578125-14.4299926758l-.1830444336-2.0460205078h2.000793457l-.7276611328-7.8800048828-1.8186035156-9.3119506836-1.8177490234-7.8800048828-1.2731323242-2.8650512695-.2727661133-2.8659667969-1.8186035156-7.1630249023-2.9087524414-9.7219848633-5.2737426758-12.7219848633-11.6367797852-5.9349975586-7.5463256836-2.2510375977c.0189819336-.6292114258.2094116211-1.2366333008.5454711914-1.7399902344,1.4543457031-1.9439697266,1.9092407227-3.958984375-1.5458984375-9.2799682617-3.4542236328-5.3209838867-.2727050781-13.8150024414-.2727050781-13.8150024414,0,0,4.0912475586-9.2100219727,0-14.6340332031-2.4914550781-3.3792724609-3.9287719727-7.5854492188-4.0912475586-11.9729614258v-.5120239258c.0914916992-1.2279663086-.1812744141-5.5260009766-5.0907592773-16.9869995117-2.9468994141-6.8780517578-9.6552124023-8.4395141602-15.9662475586-8.1311035156v275.639831543l.5403442383,14.4490966797,1.0607910156,9.0802001953.2727050781,9.2099609375-1.0003662109,12.2800292969,1.3637695312,10.2650146484,4.2733764648.8189697266c-.6370239258,6.9590454102-1.7280273438,11.4299926758-.7276611328,18.3880004883,1.181640625,9.8240356445,1.4544067383,7.4700317383.3642578125,18.2150268555-1.0918579102,10.7449951172-1.8186035156,32.3380126953.7267456055,44.617980957,2.5454101562,12.2800292969,4.0912475586,31.007019043,5.7277832031,39.9100341797,1.1815795898,6.1400146484.7276000977,8.799987793-.2727661133,15.1449584961-.6469726562,3.5103149414-.6469726562,7.1327514648,0,10.6430053711.2727661133,1.8420410156.6361083984,2.0469970703,1.0003662109,2.4559936523.8641967773.9089355469,1.9996948242,1.4202880859,3.1823730469,1.4330444336h6.0911254883c2.6369018555.2049560547,5.3643798828,1.3299560547,7.6370239258,1.6369628906,2.2725830078.3070068359,5.3643798828.1030273438,7.4548339844.3070068359,1.5655517578.1654663086,3.1350097656-.2670898438,4.4555053711-1.2279663086,2.272644043-1.9440307617-2.0913696289-3.2750244141-4.0006103516-4.298034668l-5.5455932617-5.2189941406c-3.9091186523-1.8419799805-5.6371459961-3.3770141602-8.6373901367-5.6279907227-2.7274780273-6.549987793.4548950195-12.2799682617-.4548950195-16.4760131836,1.0003662109-8.083984375,8.1824951172-63.1400146484,3.4551391602-78.4899902344-.4548950195-1.4329833984.090637207-5.6279907227,0-7.2659912109-.8182373047-11.4609985352,1.3637695312-21.6619873047,4.0006103516-32.6119995117l2.5454101562.6140136719,1.4543457031-6.5819702148,2.2734985352-4.8099975586,3.9997558594-17.2940063477,2.7274780273-16.1690063477v-5.423034668l.1821289062-2.967956543,11.1827392578-9.0050048828c2.272644043-3.8890380859,3.3636474609-8.8010253906,5.4550170898-12.4849853516-4.1818847656-14.8380126953,0-26.6069946289,1.181640625-42.366027832,1.1815795898-15.7600097656,1.6364746094-38.1699829102-2.6359863281-54.6459960938ZM117.5361656842,261.0971069336v-.0009765625l-.4539794922-5.5260009766-.6370239258-9.2100219727v-1.5350341797l1.4552612305-1.8419799805-1.2731323242-5.6279907227-2.4650268555-6.7744750977-1.5355834961-3.5615234375-1.8177490234-6.1400146484-2.0007324219-4.3999633789-2.5168457031-7.3178100586-2.0285644531-4.8602294922-1.7133789062-7.1397705078-.5484008789-4.6452026367.5205688477-8.4881591797,1.1787719727-6.6422119141,1.7200317383-7.3212280273,2.838684082-8.3870849609,1.4193725586-6.7097167969.4032592773-6.5036010742,2.3637084961,13.367980957,1.091003418,4.7080078125,1.6365356445-.6140136719c1.7271118164,6.3439941406,3.0002441406,12.791015625,2.2725830078,20.2620239258-1.4543457031,14.326965332,3.4551391602,48.3009643555,4.6367797852,60.8889770508,1.1815795898,12.5870361328-1.5458984375,9.1069946289-4.5461425781,14.0200195312Z" style="fill: rgb(47, 181, 210);"></path>
                            <path d="M71.2499718366,291.3197021484V15.7578735352c-.0536499023.005065918-.1082763672.0076293945-.1618652344.0129394531v-.1789550781l-11.1854858398.653137207,1.6063842773,2.8111572266-3.9155273438-1.3051757812.3011474609,6.5258789062-3.6143188477-.8032226562.2008056641,8.9354248047h-2.3091430664l2.8111572266,2.1083984375c0,.2007446289-.100402832.401550293-.100402832.602355957l-4.2167358398.9035644531,2.5099487305,1.6063842773-1.8071289062,3.3131713867-1.8071899414,3.9154663086,3.5139160156-.501953125v.2008056641c-3.7147216797,5.321105957-2.5099487305,11.043762207,0,16.5656738281h2.5099487305l1.6063842773,3.4135131836c.100402832,5.220703125.100402832,10.541809082.100402832,15.662109375l-.3012084961.2007446289-1.2047729492-.501953125-2.6103515625,3.2127075195-2.2087402344,1.4055786133-6.6262817383,2.1083984375-3.7147216797,2.5099487305-7.3290405273,5.2206420898-13.6541137695,7.3291015625-7.0278930664,7.0278320312-3.2127075195,9.5378417969-2.0079956055,7.0278320312-.501953125,4.5179443359-.8032226562,4.8190917969-1.5059814453,5.5219116211.3012084961,6.5258178711-2.0079345703,7.7306518555-2.0079956055,9.1362304688-.8031616211,7.7306518555h1.5059814453l.1003417969.100402832c-.2666015625,4.3865356445.1397094727,8.7880859375,1.2047729492,13.0517578125-4.7186889648,16.1640625-2.5099487305,37.7496337891-1.2047729492,53.2109375s4.9194946289,31.3241577148.3012084961,45.8818969727c2.3091430664,3.6143188477,4.5178833008,7.4294433594,7.0278320312,11.2445678711l13.5537719727,8.3330078125h.2008056641v5.321105957l3.0119018555,15.8628540039,4.4175415039,16.9672851562,2.5099487305,4.7186889648,1.6063842773,3.5139770508,1.6063232422-.3012084961c2.9115600586,10.7425537109,3.0119628906,22.7903442383,2.1083984375,34.0349121094-.0826416016,1.5836181641-.4217529297,3.1433105469-1.0040283203,4.618347168-5.220703125,15.0596923828,6.0239257812,72.4873657227,7.1282958984,80.4188232422-.9443969727,4.1304931641-1.5819702148,8.3251953125-1.9075927734,12.5497436523-3.3131103516,2.2087402344-6.0238647461,4.8190917969-6.9274291992,8.8350219727l-6.1243286133,5.120300293c-2.1083374023,1.0039672852-6.9274291992,2.3091430664-4.4174804688,4.2167358398.602355957.501953125,2.6103515625,1.4055786133,4.9194946289,1.2047729492s5.7227172852,0,8.2326660156-.3012084961,5.5218505859-1.4055786133,8.4334106445-1.6063842773,6.8270874023-.100402832,9.8389892578-.100402832c.7028198242-2.2087402344,1.6063842773-1.2047729492,2.1083984375-4.2167358398.501953125-3.0119018555-1.3051757812-5.72265625,0-10.4413452148,1.3051757812-4.71875.401550293-4.71875,1.4055786133-13.5537719727,1.0039672852-8.8349609375,2.9114990234-28.6134033203,5.72265625-40.6611938477,2.8111572266-12.0477294922,2.0079345703-33.2317504883.8031616211-43.7734985352-1.2047729492-10.541809082-.9035644531-8.2326660156.4016113281-17.8708496094,1.0782470703-6.8080444336,1.2470703125-13.7291259766.5020141602-20.5816040039l1.7067260742-.6024169922,1.5059814453-7.1282348633-1.1043701172-12.0477905273.3012084961-9.0357666016.5559692383-7.177734375.9913330078-11.637878418.1618652344-8.1069335938ZM31.2971539197,186.0180053711v6.0238647461l-.7067871094,4.0159301758-.0039672852,5.8231201172-.7027587891,8.0317993164-1.0040283203,4.5179443359-1.8071289062,8.7346191406v3.3131103516l-2.0079956055,6.0239257812-2.0079345703,3.5139160156-1.5059814453,5.5219116211,1.3051757812,6.0238647461,1.9075927734.401550293-.3012084961,2.2088012695-1.4055786133.9035644531-.7028198242,9.0358276367-.501953125,5.4214477539v.0000610352c-3.3131713867-4.819152832-6.4254760742-1.4055786133-5.120300293-13.7545166016,1.3051757812-12.3489990234,6.7266845703-45.6811523438,5.120300293-59.7368774414-.8031616211-7.3290405273.602355957-13.6541137695,2.5099487305-19.8787841797l.7027587891-.2008056641,2.3092041016-3.8151245117,1.5059204102-7.2286376953,1.2047729492,3.7147216797,1.7067871094,9.3370361328.0039672852,5.220703125-.4979858398,6.8270263672Z" style="fill: rgb(47, 181, 210);"></path>
                        </g>
                        <path d="M164.4613365827,287.8241271973l3,1.5h30v7.700012207h-29.6999969482l-3.3000030518,2v-11.200012207Z" class="cls-1" style="fill: rgb(34, 49, 55);"></path>
                        <path d="M158.0313286481,292.1199951172h-83.0999984741v1.5599975586h83.0999984741v-1.5599975586Z" class="cls-1" style="fill: rgb(34, 49, 55);"></path>
                        <path d="M157.7613396344,15.1241207123v-1.6000003815H7.961341351v486.7000007629h1.6000051498V15.1241207123h148.1999931335Z" class="cls-1" style="fill: rgb(212, 212, 212);"></path>
                    </svg>
                    
                    <div class="input-overlay input-pos-height">
                        <label>Taille</label>
                        <div class="input-flex">
                            <input type="number" id="cube-height" placeholder="180">
                            <span class="overlay-unit">cm</span>
                        </div>
                    </div>

                    <div class="input-overlay input-pos-inseam">
                        <label>Longueur de pas</label>
                        <div class="input-flex">
                            <input type="number" id="cube-inseam" placeholder="80">
                            <span class="overlay-unit">cm</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-action">
                <h2 class="bike-model">TAILLE DU CADRE</h2>
                
                <form id="cube-form-inline">
                    <button type="submit" class="btn-cube-submit">Calculer la dimension du cadre</button>
                </form>

                <div id="cube-result-area" class="result-box" style="display:none;">
                    <h3 class="result-title" id="result-title-text">Ta dimension</h3>
                    <div id="cube-frame-result" class="result-value"></div>
                    <p class="disclaimer-text">
                        Veuillez prendre en compte qu'il s'agit ici uniquement d'une recommandation pour une taille de cadre adaptée. Cela ne remplace pas un conseil personnalisé et un essai chez un revendeur.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
@font-face {
  font-family: 'Damas Font';
  src: url('../font/font.woff2');
}
.cube-calc-component {
    width: 100%;
    background-color: #fff;
    padding: 40px 0;
    font-family: 'Damas Font';
    box-sizing: border-box;
}

.cube-calc-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 20px;
}

.cube-calc-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 40px;
    align-items: flex-start;
}

.col-visual {
    flex: 1;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    align-items: center; 
}

.section-title {
    width: 100%;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    color: #000;
}

.silhouette-wrapper {
    position: relative;
    width: 100%;
    max-width: 250px;
}

.silhouette-svg {
    width: 100%;
    height: auto;
    display: block;
    overflow: visible; 
}

.input-overlay {
    position: absolute;
    background: transparent;
    width: 110px;

    z-index: 10; 
}

.input-overlay label {
    display: inline-block;
    font-size: 11px;
    color: #333;
    margin-bottom: 2px;
    background-color: #fff; 
    padding: 2px 4px;    
    border-radius: 3px;
}

.input-flex {
    display: flex;
    align-items: center;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 5px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.input-flex input {
    border: none;
    outline: none;
    width: 100%;
    font-size: 14px;
    color: #333;
}

.overlay-unit {
    font-size: 12px;
    color: #999;
    padding-left: 4px;
}

.input-pos-height {
    top: 2%;       
    left: 85%;     
}

.input-pos-inseam {
    top: 58%;      
    left: 85%;     
}

.col-action {
    flex: 1;
    min-width: 300px;
    padding-top: 40px;
}

.bike-model {
    font-size: 28px;
    font-weight: 700;
    margin-top: 0;
    margin-bottom: 30px;
    color: #000;
}

.btn-cube-submit {
    background-color: #40b5c4;
    color: white;
    font-size: 16px;
    font-weight: bold;
    border: none;
    padding: 15px 30px;
    width: 100%;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s;
    margin-bottom: 30px;
}

.btn-cube-submit:hover {
    background-color: #339aa9;
}

.result-box {
    margin-top: 20px;
}

.result-title {
    font-size: 18px;
    font-weight: bold;
    color: #000;
    margin: 0 0 5px 0;
}

.result-value {
    font-size: 32px;
    font-weight: bold;
    color: #000;
    margin-bottom: 20px;
}

.disclaimer-text {
    font-size: 12px;
    color: #666;
    line-height: 1.5;
}

@media (max-width: 600px) {
    .silhouette-wrapper {
        max-width: 200px; 
    }
    .input-overlay {
        width: 90px;
    }
    .cube-calc-grid {
        flex-direction: column;
        align-items: center;
    }
    .col-visual, .col-action {
        width: 100%;
    }
    .input-pos-height, .input-pos-inseam {
        left: 75%; 
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('cube-form-inline');
    const resultArea = document.getElementById('cube-result-area');
    const resultValue = document.getElementById('cube-frame-result');
    const resultLabel = document.getElementById('result-title-text');

    const heightInput = document.getElementById('cube-height');
    const inseamInput = document.getElementById('cube-inseam');

    if(!form) return; 

    form.addEventListener('submit', function(e) {
        e.preventDefault(); 

        const height = parseInt(heightInput.value);
        const inseam = parseInt(inseamInput.value);

        resultArea.style.display = 'none';
        
        if(resultLabel) {
            resultLabel.innerText = "Ta dimension"; 
            resultLabel.style.color = "#000";
        }
        resultArea.style.borderLeft = "none"; 
        resultArea.style.backgroundColor = "transparent";

        if (!height || !inseam) return;

        if (height < 120 || height > 230) {
            displayError("La taille semble incorrecte.");
            return;
        }

        if (inseam < 50 || inseam > 120 || inseam >= height) {
            displayError("L'entrejambe semble incorrect.");
            return;
        }

        let sizeInch = (inseam * 0.226).toFixed(1);
        
        let label = "M";
        if (sizeInch < 15) label = "XS";
        else if (sizeInch < 17) label = "S";
        else if (sizeInch < 19) label = "M";
        else if (sizeInch < 21) label = "L";
        else label = "XL";

        resultValue.innerHTML = `${label}`; 
        
        resultArea.style.display = 'block';
    });

    function displayError(msg) {
        if(resultLabel) {
            resultLabel.innerText = "Erreur :";
            resultLabel.style.color = "#d9534f";
        }
        
        resultValue.innerHTML = `<span style="font-size:16px; color:#d9534f; font-weight:normal;">${msg}</span>`;
        resultArea.style.display = 'block';
    }
});
</script>